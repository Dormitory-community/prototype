:root{
  /* 기본(라이트) 값 */
  --app-bg: #f8fafc;
  --app-paper: #ffffff;
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* 다크 모드일 때 변수 재정의 */
@media (prefers-color-scheme: dark) {
  :root {
    --app-bg: #0f172a;     /* body와 동일한 다크 배경 */
    --app-paper: #1e293b;
  }
}

/* 레이아웃 안정화: 모바일에서 fill-available 사용 */
html, body, #root {
  height: 100%;
  min-height: -webkit-fill-available; /* iOS에서 유용 */
  margin: 0;
  background-color: var(--app-bg); /* 핵심: body 배경을 CSS 변수로 관리 */
}

/* PWA 환경에서 상단 노치 영역을 불투명하게 만들기 */
@media (display-mode: standalone) {
  /* iOS PWA에서 상단 노치 영역을 앱 배경색으로 채우기 */
  html::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: env(safe-area-inset-top, 0px);
    background-color: var(--app-bg);
    z-index: 10000; /* 모든 요소 위에 표시 */
    pointer-events: none;
  }

  /* 추가로 body에도 상단 패딩을 줘서 콘텐츠가 노치 아래로 들어가지 않도록 */
  body {
    padding-top: env(safe-area-inset-top, 0px);
  }
}

/* 안전영역을 덮는 pseudo element: 항상 최상단(또는 nav 아래)에 위치 */
body::after {
  content: "";
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  height: env(safe-area-inset-bottom, 0px);
  pointer-events: none;
  z-index: 9999; /* 필요하면 조정 (네비게이션보다 위에 두려면 더 높게) */
  background: var(--app-bg);
}

/* 만약 네비게이션 바 컴포넌트(.mobile-nav-bar)가 있고,
   pseudo-element를 그 내부에 두고 싶다면 아래처럼도 가능 */
.mobile-nav-bar::after {
  content: "";
  position: absolute;
  bottom: calc(-1 * env(safe-area-inset-bottom, 0px));
  left: 0; right: 0;
  height: env(safe-area-inset-bottom, 0px);
  background: var(--app-bg);
  z-index: -1;
}

/* iOS 스크롤 부드럽게 */
@supports (-webkit-overflow-scrolling: touch) {
  body { -webkit-overflow-scrolling: touch; }
}